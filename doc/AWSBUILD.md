AWS Build Machine
=================

Since I needed a Ubuntu machine to build debian kernel packages, I got an AWS
instance. Here's the script to get started:

    sudo apt update
    sudo apt upgrade
    sudo apt install build-essential git kernel-package fakeroot \
        libncurses5-dev libssl-dev ccache
    git clone -b dynamic_detour --single-branch --depth 16 \
        https://github.com/brenns10/mptcp.git

    # from my machine
    scp ~/repos/mptcp/.config AWS:mptcp/

    # in tmux on AWS
    make oldconfig  # just to be sure
    make -j 3 deb-pkg LOCALVERSION=-custom

You will need a kernel config, which is the `ubuntu_custom` one from the `etc/`
directory. It can be generated by merging the default Ubuntu kernel config with
some (but not all) of the fragments in the `etc/` directory. In particular, we
want these:

- `mininet.frag`
- `mptcp.frag`

The other ones are not necessary because we don't want to have any debugging
options in use for testing, and since we aren't using vido, we won't need the
special overlay filesystem stuff. Here's a copy paste command from `mptcp`
repository:

    scripts/kconfig/merge_config.sh \
        ~/repos/thesis/etc/ubuntu_14.02_4.2.0-27.config \
        ~/repos/thesis/etc/mptcp.frag \
        ~/repos/thesis/etc/mininet.frag
